---
title: "Обзор Tor"
icon: 'simple/torproject'
description: Tor - это бесплатная в использовании децентрализованная сеть, разработанная для использования интернета с максимально возможной степенью конфиденциальности.
---

Tor - это бесплатная в использовании децентрализованная сеть, разработанная для использования интернета с максимально возможной степенью конфиденциальности. При правильном использовании сеть позволяет осуществлять частный и анонимный браузинг и общение.

## Построение пути к сервисам Clearnet

"Сервисы Clearnet" - это веб-сайты, доступ к которым можно получить с помощью любого браузера, например [privacyguides.org](https://www.privacyguides.org). Tor позволяет вам анонимно подключаться к этим сайтам, направляя ваш трафик через сеть, состоящую из тысяч, управляемых волонтёрами, серверов, которые называются узлами (или ретрансляторами).

Каждый раз, когда вы [подключаетесь к Tor](../tor.md), он выбирает три узла для построения пути в интернет - этот путь называется "цепь."

<figure markdown>
  ![Путь Tor, показывающий подключение вашего устройства к узлу входа, среднему узлу и узлу выхода до достижения целевого сайта](../assets/img/how-tor-works/tor-path.svg#only-light)
  ![Путь Tor, показывающий подключение вашего устройства к узлу входа, среднему узлу и узлу выхода до достижения целевого сайта](../assets/img/how-tor-works/tor-path-dark.svg#only-dark)
  <figcaption>Путь Tor</figcaption>
</figure>

Каждый из этих узлов имеет свою функцию:

### Входной узел

Входной узел, часто называемый сторожевым узлом, является первым узлом, к которому подключается ваш клиент Tor. Входной узел может видеть ваш IP-адрес, однако он не может видеть, к чему вы подключаетесь.

В отличие от других узлов, клиент Tor будет случайным образом выбирать входной узел и придерживаться его в течение двух-трех месяцев, чтобы защитить вас от определенных атак.[^1]

### Средний узел

Средний узел - это второй узел, к которому подключается ваш клиент Tor. Он может видеть, с какого узла пришел трафик (входного узла) и к какому узлу он идет дальше. Средний узел не может видеть ваш IP-адрес или домен, к которому вы подключаетесь.

Для каждой новой цепи средний узел выбирается случайным образом из всех доступных узлов Tor.

### Выходной узел

Выходной узел - это точка, в которой ваш веб-трафик покидает сеть Tor и перенаправляется в нужное вам место назначения. Выходной узел не может видеть ваш IP-адрес, но он знает, к какому сайту подключается.

Выходной узел  будет выбран случайным образом из всех доступных узлов Tor, запущенных с флагом ретрансляции выхода.[^2]

## Построение пути к сервисам Onion

"Сервисы Onion" (также часто называемые "скрытыми сервисами") - это веб-сайты, доступ к которым возможен только через браузер Tor. Эти сайты имеют длинное случайно сгенерированное доменное имя, заканчивающееся на `.onion`.

Подключение к сервису Onion в Tor работает аналогично подключению к сервису clearnet, но ваш трафик проходит в общей сложности через **шесть узлов**, прежде чем достигнет сервера назначения. Однако, как и раньше, только три из этих узлов способствуют *вашей* анонимности, остальные три узла защищают анонимность *сервисов Onion*, скрывая истинный IP и местоположение сайта так же, как Tor Browser скрывает ваш.

<figure style="width:100%" markdown>
  ![Путь Tor, показывающий, что ваш трафик направляется через три ваших Tor-узла плюс три дополнительных Tor-узла, скрывающих идентичность сайта](../assets/img/how-tor-works/tor-path-hidden-service.svg#only-light)
  ![Путь Tor, показывающий, что ваш трафик направляется через три ваших Tor-узла плюс три дополнительных Tor-узла, скрывающих идентичность веб-сайта](../assets/img/how-tor-works/tor-path-hidden-service-dark.svg#only-dark)
  <figcaption>Путь цепи Tor с  сервисами Onion. Узлы в <span class="pg-blue">синем</span> квадрате принадлежат вашему браузеру, а узлы в <span class="pg-red">красном</span> квадрате принадлежат серверу, поэтому их идентичность скрыта от вас.</figcaption>
</figure>

## Шифрование

Tor шифрует каждый пакет (блок передаваемых данных) три раза с помощью ключей от выходного, среднего и входного узла - именно в таком порядке.

После того как Tor построил цепь, передача данных осуществляется следующим образом:

1. Во-первых: когда пакет поступает на входной узел, первый уровень шифрования снимается. В этом зашифрованном пакете входной узел найдет другой зашифрованный пакет с адресом среднего узла. Затем входной узел пересылает пакет среднему узлу.

2. Во-вторых: когда средний узел получает пакет от входного узла, он тоже снимает слой шифрования своим ключом, и на этот раз находит зашифрованный пакет с адресом выходного узла. Затем средний узел пересылает пакет на выходной узел.

3. И последнее: когда выходной узел получает свой пакет, он удаляет последний уровень шифрования своим ключом. Выходной узел увидит адрес назначения и перешлет пакет на этот адрес.

Ниже приведена альтернативная диаграмма, показывающая этот процесс. Каждый узел снимает свой собственный уровень шифрования, а когда сервер назначения возвращает данные, тот же процесс происходит полностью в обратном порядке. Например, выходной узел не знает, кто вы, но он знает, с какого узла пришло сообщение, поэтому он добавляет свой собственный уровень шифрования и отправляет его обратно.

<figure markdown>
  ![Шифрование Tor](../assets/img/how-tor-works/tor-encryption.svg#only-light)
  ![Шифрование Tor](../assets/img/how-tor-works/tor-encryption-dark.svg#only-dark)
  <figcaption>Отправка и получение данных через сеть Tor</figcaption>
</figure>

Tor позволяет нам подключаться к серверу так, чтобы никто не знал всего пути. Входной узел знает, кто вы, но не знает, куда вы идете; средний узел не знает, кто вы и куда вы идете; а выходной узел знает, куда вы идете, но не знает, кто вы. Поскольку конечный узел устанавливает окончательное соединение, сервер назначения никогда не узнает ваш IP-адрес.

## Предостережения

Хотя Tor обеспечивает надежные гарантии конфиденциальности, следует помнить, что Tor не совершенен:

- Хорошо финансируемые противники, способные пассивно следить за большинством сетевого трафика по всему миру, имеют шанс деанонимизировать пользователей Tor с помощью продвинутого анализа трафика. Tor также не защищает вас от саморазоблачения по ошибке, например, если вы поделитесь слишком большой информацией о своей настоящей личности.
- Выходные узлы Tor также могут отслеживать проходящий через них трафик. Это означает, что трафик, который не зашифрован, например, обычный трафик HTTP, можно записывать и отслеживать. Если такой трафик содержит персонально идентифицируемую информацию, то он может деанонимизировать вас для этого выходного узла. Таким образом, мы рекомендуем использовать HTTPS через Tor, где это возможно.

Если вы хотите использовать Tor для просмотра веб-страниц, мы рекомендуем только **официальный ** Tor Browser - он разработан для предотвращения цифровых отпечатков.

- [Tor Browser :material-arrow-right-drop-circle:](../tor.md#tor-browser)

## Дополнительные советы

- [Руководство пользователя Tor Browser](https://tb-manual.torproject.org)
- [How Tor Works - Computerphile](https://invidious.privacyguides.net/embed/QRYzre4bf7I?local=true) <small>(YouTube)</small>
- [Tor Onion Services - Computerphile](https://invidious.privacyguides.net/embed/lVcbq_a5N9I?local=true) <small>(YouTube)</small>

[^1]: Первый ретранслятор в вашей цепи называется "входным" или "охранным". Это быстрый и стабильный ретранслятор, который остается первым в вашей цепи в течение 2-3 месяцев для защиты от известной атаки, нарушающей анонимность. Остальная часть цепи меняется с каждым новым посещаемым сайтом, и все вместе эти реле обеспечивают полную защиту конфиденциальности Tor. Более подробную информацию о том, как работают охранные ретрансляторы, можно найти в этом [посте в блоге](https://blog.torproject.org/improving-tors-anonymity-changing-guard-parameters) и [документе](https://www-users.cs.umn.edu/~hoppernj/single_guard.pdf) о входных узлах. ([https://support.torproject.org/tbb/tbb-2/](https://support.torproject.org/tbb/tbb-2/))

[^2]: Флаг ретраслятора: специальная (дис)квалификация реле для позиций цепи (например, "Guard", "Exit", "BadExit"), свойств цепи (например, "Fast", "Stable") или ролей (например, "Authority", "HSDir"), назначаемых владельцами директории и далее определенных в спецификации протокола директории. ([https://metrics.torproject.org/glossary.html](https://metrics.torproject.org/glossary.html))
